export default async function determineBackendUrl(): Promise<string> {
  const isLocalConfig = import.meta.env.VITE_LOCAL_CONFIG === 'true';

  if (isLocalConfig) {
    const localConfigModule = await import('../config/local/config.json');
    return localConfigModule.default.backendIp;
  }

  const response = await fetch('/config.json');
  if (!response.ok) {
    throw new Error('Failed to load runtime config.json');
  }

  const runtimeConfig = await response.json();
  return runtimeConfig.backendIp;
}
